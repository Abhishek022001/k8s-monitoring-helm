apiVersion: v1
kind: Secret
metadata:
  name: grafana-agent-credentials
  namespace: {{ .Release.Namespace }}
type: Opaque
data:
{{- if .Values.metrics.enabled }}
  prometheus_host: {{ .Values.externalServices.prometheus.host | b64enc | quote }}
  prometheus_username: {{ .Values.externalServices.prometheus.username | b64enc | quote }}
  prometheus_password: {{ .Values.externalServices.prometheus.password | b64enc | quote }}
{{- end }}
{{- if .Values.logs.enabled }}
  loki_host: {{ .Values.externalServices.loki.host | b64enc | quote }}
  loki_username: {{ .Values.externalServices.loki.username | b64enc | quote }}
  loki_password: {{ .Values.externalServices.loki.password | b64enc | quote }}
{{- end }}
